
<!doctype html>
<!--
Copyright 2014 Google Inc. All Rights Reserved.

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="description" content="Sample illustrating the use of the picture element.">

    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>&lt;srcset&gt; Element Sample</title>

    <style type="text/css">
    img {
      width: 100%;
    }

    .columns {
      width: 100%;
    }

    .columns .item {
      float: left;
      width: calc(100% * 0.33);
      padding: 0 calc(100% * 0.005) 10px 0;
    }

    .columns .item:last-child {
      padding-right: 0;
    }

    @media all and (max-width: 800px) {
      .columns .item {
        width: 100%;
        float: none;
      }
    }
    </style>

    <script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function () {
      var srcsetImages = document.querySelectorAll('img[srcset]');
      for (var i = 0; i < srcsetImages.length; i++) {
        srcsetImages[i].addEventListener('load', function(event) {
          var img = event.currentTarget;
          //webkit does not currently support "currentSrc". "src" does not update
          // dynamically and will also be what is intially written in the markup.
          console.log(event.currentTarget.currentSrc);
        });
      }

      window.addEventListener('resize', function() { handleResize(srcsetImages) });
    });

    var resizeThrottleTimer = null;
    function handleResize(elements) {
      clearTimeout(resizeThrottleTimer);
      resizeThrottleTimer = setTimeout(reloadSrcset, 50, elements);
    }

    function reloadSrcset() {
      for (var i = 0; i < arguments[0].length; i++) {
        var img = arguments[0][i];
        img.srcset = img.srcset;
      }
    }
    </script>

  </head>

  <body>
    <h1>&lt;img srcset&gt; Element Sample</h1>

    <section id="media-query-example">

      <p>Same as the <a href="../picture"><code>picture</code> demo</a>, but with <code>srcset</code>.</p>

      <div style="text-align:center;">
        <img
          srcset="2500.png 2500w, 1500.png 1500w, 1000.png 1000w, 750.png 750w, 500.png 500w, 300.png 300w, 100.png 100w"
          sizes="100vw"
          alt="sample images"
          />
      </div>

<hr>

      <div class="columns">
        <div class="item">
          <img
            srcset="2500.png 2500w, 1500.png 1500w, 1000.png 1000w, 750.png 750w, 500.png 500w, 300.png 300w, 100.png 100w"
            sizes="(min-width: 801px) 33vw, 100vw"
            alt="sample images"
            />
        </div>

        <div class="item">
          <img
            srcset="2500.png 2500w, 1500.png 1500w, 1000.png 1000w, 750.png 750w, 500.png 500w, 300.png 300w, 100.png 100w"
            sizes="(min-width: 801px) 33vw, 100vw"
            alt="sample images"
            />
        </div>

        <div class="item">
          <img
            srcset="2500.png 2500w, 1500.png 1500w, 1000.png 1000w, 750.png 750w, 500.png 500w, 300.png 300w, 100.png 100w"
            sizes="(min-width: 801px) 33vw, 100vw"
            alt="sample images"
            />
        </div>
      </div>


    </section>
  </body>
</html>
